<!DOCTYPE html>
<html lang="zxx">

<head>
    <title>Library</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script>
        addEventListener("load", function () {
            setTimeout(hideURLbar, 0);
        }, false);

        function hideURLbar() {
            window.scrollTo(0, 1);
        }

    const api_url = "http://35.154.104.127:8080/LMS/category/getAllCategories";
  
    async function getapi(url) {
        const response = await fetch(url,{
                method : 'GET',
                headers : {
                            'Content-Type' : 'application/json',
                            'token': localStorage.getItem("jwt")
                         }
            });
        var data = await response.json();
       // console.log(data['response']);
        if (response) {
           if(!response.ok){
                if(response.status=='401'){
                    //localStorage.removeItem('jwt');
                    //window.location.href = './login.html'
                    console.log(localStorage.getItem("jwt"));
                }
                return false;
           }
        }
        show(data.response);
}
getapi(api_url);

function show(data) {
    let tab = 
        `<thead class="thead-dark">
            <tr>
                <th scope="col">S.No.</th>
                <th scope="col">Category Name</th>
                <th scope="col">Status</th>
                <th scope="col">Action</th>
            </tr>
        </thead>
        <tbody>`;
    
    // Loop to access all rows 
    let sr = 0;
    //for (let r of data.list) 
    data.forEach(e => {
        sr++;
        tab += `<tr> 
        <th scope="row">${sr}</th>
        <td>${e.categories}</td>
        <td>${e.isActive == "0"? "Active" : "Inactive"}</td>
        <td> 
            <button type="button" class="btn btn-primary" onClick = "updateBook('${e.categoryId}')"><i class="fa fa-edit"></i></button>
            <button type="button" class="btn btn-danger"><i class="fa fa-trash"></i></button>
        </td>
        </tr>`;
        
    });
    tab += `</tbody>`;
        document.getElementById("categories").innerHTML = tab;
    }
    function updateBook(catId){
        window.location.href = './update-categories.html?catId='+catId;
    }
    </script>
    <!-- Custom Theme files -->
    <link href="css/bootstrap.css" type="text/css" rel="stylesheet" media="all">
    <!-- shop css -->
    <link href="css/shop.css" type="text/css" rel="stylesheet" media="all">
    <link href="css/style.css" type="text/css" rel="stylesheet" media="all">
    <link href="css/common.css" type="text/css" rel="stylesheet" media="all">
    <!-- font-awesome icons -->
    <link href="css/font-awesome.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
</head>


<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
    <div id="home">
        <!-- header -->
        <!-- navbar -->
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="main-nav">
                <div class="container">

                    <div class="navbar-header page-scroll">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                            <span class="sr-only">Library</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <h1>
                            <a class="navbar-brand" href="index.html"><img src="images/lms-logo.png"></a>
                        </h1>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse navbar-ex1-collapse nav-right">
                        <ul class="nav navbar-nav navbar-left cl-effect-15">
                            <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                            <li class="hidden">
                                <a class="page-scroll" href="#page-top"></a>
                            </li>
                            <li>
                                <a href="dashboard.html" class="dropdown-toggle">Dashboard</a>
                            </li>

                            <li class="dropdown">
                                <a href="Books.html" class="dropdown-toggle effect-3" data-toggle="dropdown">Books
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="add-book.html">Add Book</a>
                                    </li>
                                    <li>
                                        <a href="manage-books.html">Manage Books</a>
                                    </li>
                                    <li>
                                        <a href="damaged-books.html">Damaged Books</a>
                                    </li>
                                    <li>
                                        <a href="books-maintenance.html">Books Maintenance</a>
                                    </li>
                                    <li>
                                        <a href="subscription.html">Subscription</a>
                                    </li>
                                </ul>
                            </li>
                            
                            <li class="dropdown ">
                                <a href="Books.html" class="dropdown-toggle effect-3" data-toggle="dropdown">Issue Books
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="issue-book.html">Issue New Book</a>
                                    </li>
                                    <li>
                                        <a href="reissue-books.html">Reissue Books</a>
                                    </li>
                                    <li >
                                        <a href="return-book.html">Return Book</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="dropdown active-nav">
                                <a href="#" class="dropdown-toggle effect-3" data-toggle="dropdown">Categories
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="add-categories.html">Add Category</a>
                                    </li>
                                    <li class="active-subnav">
                                        <a href="manage-categories.html">Manage Categories</a>
                                    </li>

                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle effect-3" data-toggle="dropdown">Admin
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li >
                                        <a href="add-authors.html">Add Author</a>
                                    </li>
                                    <li>
                                        <a href="manage-authors.html">Manage Author</a>
                                    </li>
                                    <li>
                                        <a href="reminder-services.html">Reminder Services</a>
                                    </li>
                                    <li>
                                        <a href="generate-reports.html">Generate Reports</a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a href="login.html" class="dropdown-toggle">Reg. Student</a>

                            </li>
                            <li>
                                <a href="login.html" title="SignIn & SignUp">
                                    <span class="fa fa-user nav-icon" aria-hidden="true"></span>
                                </a>
                            </li>

                        </ul>
                    </div>
                    <!-- /.navbar-collapse -->
                    <div class="clearfix"></div>
                </div>
                <!-- /.container -->
            </div>
        </nav>
        <!-- //navbar ends here -->
<div class="spacer"></div>

            <!-- add authors form -->
            <div class="login-form section text-center">
                <div class="container">
                    <div class="panel-heading">
                        <div class="row">
                          <!-- breadcrumbs -->
        
                        <div class="col-md-9">
                              <ul class="btn-group btn-breadcrumb bc-list">
                                <li class="btn btn1">
                                  <a href="index.html">
                                    <i class="glyphicon glyphicon-home"></i>
                                  </a>
                                </li>
                                <li class="btn btn2">
                                    <a href="#">Categories</a>
                                </li>
                                <li class="btn btn3">
                                  <a href="manage-categories.html">Manage Categories</a>
                                </li>
                              </ul>
                        </div>
                          <!--//breadcrumbs ends here-->
        
                        </div>
        
                      </div>
                    <div class="col-md-12 toverflow">

                    <table class="table table-bordered" id="categories">
                    </table>
                    <nav aria-label="..." class="float-right">
                        <ul class="pagination">
                          <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1">Previous</a>
                          </li>
                          <li class="page-item"><a class="page-link" href="#">1</a></li>
                          <li class="page-item active">
                            <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
                          </li>
                          <li class="page-item"><a class="page-link" href="#">3</a></li>
                          <li class="page-item">
                            <a class="page-link" href="#">Next</a>
                          </li>
                        </ul>
                      </nav>
                      </div>
                </div>
            </div>
        </div>
        <!--//add authors form ends here-->

    </div>

    <!-- //footer -->
    <div class="cpy-right">
        <p>© 2018 Library. All rights reserved | Design by
            <a href="#"> Library.</a>
        </p>
    </div>
<!-- //home -->
    <!-- js -->
    <script src="js/jquery-2.2.3.min.js"></script>
    <!-- //js -->
    <!--search jQuery-->
    <script src="js/main.js"></script>
    <!--search jQuery-->


    <!-- dropdown nav -->
    <script>
        $(document).ready(function () {
            $(".dropdown").hover(
                function () {
                    $('.dropdown-menu', this).stop(true, true).slideDown("fast");
                    $(this).toggleClass('open');
                },
                function () {
                    $('.dropdown-menu', this).stop(true, true).slideUp("fast");
                    $(this).toggleClass('open');
                }
            );
        });
    </script>
    <!-- //dropdown nav -->

    <!-- Scrolling Nav JavaScript -->
    <script src="js/scrolling-nav.js"></script>
    <!-- //fixed-scroll-nav-js -->
    <!-- start-smooth-scrolling -->
    <script src="js/move-top.js"></script>
    <script src="js/easing.js"></script>
    <script>
        jQuery(document).ready(function ($) {
            $(".scroll").click(function (event) {
                event.preventDefault();

                $('html,body').animate({
                    scrollTop: $(this.hash).offset().top
                }, 1000);
            });
        });
    </script>
    <!-- //end-smooth-scrolling -->
    <!-- smooth-scrolling-of-move-up -->
    <script>
        $(document).ready(function () {
            /*
            var defaults = {
                containerID: 'toTop', // fading element id
                containerHoverID: 'toTopHover', // fading element hover id
                scrollSpeed: 1200,
                easingType: 'linear' 
            };
            */

            $().UItoTop({
                easingType: 'easeOutQuart'
            });

        });
    </script>
    <script src="js/SmoothScroll.min.js"></script>
    <!-- //smooth-scrolling-of-move-up -->
    <!-- Bootstrap core JavaScript
 ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/bootstrap.js"></script>
</body>

</html>